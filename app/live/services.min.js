!function(){"use strict";angular.module("timetablesApp.timetablesServices",[]).factory("timetablesService",["$http",function(t){var e="//journeyplanner.networkwestmidlands.com/api/TimetableStopApi/";return{getAllTimetables:function(a){return n(t.post(e+"Search/serviceQuery",a,{cache:"true"}))},getTrainTimetables:function(){return n(t.get("http://stagenwm.cenapps.org.uk/ways-to-travel/train/train-timetables/xmldump",{cache:"true"}))},getTTHeaders:function(a){return n(t.get(e+"GetTimetableHeader/"+a,{cache:!1}))},getTTRoute:function(a){return n(t.get(e+"GetStopsOnRoute/"+a,{cache:!1}))},getRouteMap:function(a){return n(t.get(e+"getRouteMap/"+a,{cache:!0}))}};function n(t){return t.then(a,r)}function a(t){return t.data}function r(t){console.warn("Status: "+t.status+"\n\nHeaders: "+t.statusText+"\n\nData: "+JSON.stringify(t.data)+"\n\nConfig: "+JSON.stringify(t.config))}}]).factory("savedFilter",[function(){return{set:function(t,e){sessionStorage.setItem(t,JSON.stringify(e))},get:function(t){return JSON.parse(sessionStorage.getItem(t))}}}]).factory("updatePageView",["$location",function(t){return{update:function(){dataLayer.push({event:"ngRouteChange",attributes:{route:t.absUrl().split("https://www.networkwestmidlands.com")[1]}})}}}])}();