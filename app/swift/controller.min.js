!function(){"use strict";angular.module("ticketingApp.Controller",["angucomplete-alt"]).controller("TicketingSearchCtrl",["$scope","$timeout","$filter","$location","savedFilter","ticketingService","angularGridInstance","$httpParamSerializer",function(t,e,a,o,n,r,i,l){var s=this;function u(){s.all=[],s.filteredTickets=[],s.origTickets=[],s.otherTickets=[],s.stationList=[],s.stationoocList=[],s.stationicList=[],s.swiftPaygTickets=[],s.loadingStatus="",s.passValue="",s.orderBy="orderSequence",s.limit=parseInt(o.search().limit)||6,s.limitExact=parseInt(o.search().limitExact)||6,s.postJSON={allowBus:o.search().allowBus||null,allowMetro:o.search().allowMetro||null,allowTrain:o.search().allowTrain||null,passengerType:o.search().passengerType||"",timeBand:o.search().timeBand||"",brand:o.search().brand||null,stationNames:o.search().stationNames||[[]]},t.stationFromName=null,t.stationToName=null,t.stationFromTitle=null,t.stationToTitle=null,t.stationFromNameOocZ5=null,t.stationToNameOocZ5=null,s.fromStationInfo=null,t.buyOnDirectDebitParameter=o.search().buyOnDirectDebit||null,t.buyOnDirectPurchaseParameter=o.search().buyOnDirectPurchase||null,t.buyOnSwiftParameter=o.search().buyOnSwift||null,t.hasOnlinePurchaseChannelParameter=o.search().hasOnlinePurchaseChannel||null,t.purchaseTicParameter=o.search().purchaseTic||null,t.purchaseRailStationParameter=o.search().purchaseRailStation||null,t.purchasePayzoneParameter=o.search().purchasePayzone||null,t.busTravelAreaParameter=o.search().busTravelArea||null,t.operatorParameter=o.search().operator||null,t.railZoneFromParameter=o.search().railZoneFrom||null,t.railZoneToParameter=o.search().railZoneTo||null,t.timePeriod1Parameter=o.search().timePeriod1||null,t.timePeriod2Parameter=o.search().timePeriod2||null,t.timePeriod3Parameter=o.search().timePeriod3||null,t.timePeriod4Parameter=o.search().timePeriod4||null,s.clearModes=d,s.postedJSON={},t.stationFromReq=!1,t.stationToReq=!1,t.stationToReqtwo=!1,t.stationFromOOCReq=!0}if(t.assetPath=assetPath,t.ticketUrl=ticketUrl,s.submit=h,s.clearFilter=function(){o.url("").replace(),u(),t.buyOnDirectDebitCheck=function(){return!1},t.buyOnDirectPurchaseCheck=function(){return!1},t.buyOnSwiftCheck=function(){return!1},t.hasOnlinePurchaseChannelCheck=function(){return!1},t.purchaseTicCheck=function(){return!1},t.purchaseRailStationCheck=function(){return!1},t.purchasePayzoneCheck=function(){return!1},t.timePeriod1Check=function(){return!1},t.timePeriod2Check=function(){return!1},t.timePeriod3Check=function(){return!1},t.timePeriod4Check=function(){return!1},n.set("url",""),p(),O(),S()},s.getStations=function(){r.getStations().then(function(t){if(s.stationList=t,null!==s.stationFromName){var e=s.stationFromName||null,o=s.stationToName||null,n=s.stationViaOneName||null,r=a("filter")(t,{name:e}),i=a("filter")(t,{name:o}),l=a("filter")(t,{name:n}),u=r[0],c=i[0],m=l[0];s.fromStationInfo=u,s.toStationInfo=c,s.ViaOneStationInfo=m,null!=s.fromStationInfo&&(s.fromZoneNumber=s.fromStationInfo.zone,s.toZoneNumber=s.toStationInfo.zone,null!=s.ViaOneStationInfo&&(s.ViaOneZoneNumber=s.ViaOneStationInfo.zone))}})},s.getoocStations=function(){r.getStations().then(function(t){var e=a("filter")(t,{outOfCounty:"true"});s.stationoocList=e})},s.geticStations=function(){r.getStations().then(function(t){var e=a("filter")(t,{outOfCounty:"false"});s.stationicList=e})},s.clearFromStation=p,s.clearToStation=O,s.clearViaOneStation=S,s.clearStation=function(){"[]"===o.search().stationNames&&s.clearFromStation()},s.getSwiftPAYG=g,s.updateGrid=function(){e(function(){e(function(){if(s.filteredTickets.length){s.otherTickets.length&&i.origTicketResults.refresh(),s.origTickets.length&&i.ticketResults.refresh();var t,e,a,o,r={passengerType:s.postedJSON.passengerType,timeBand:s.postedJSON.timeBand,brand:s.postedJSON.brand,stationNames:s.postedJSON.stationNames,busTravelArea:s.searchFilters.busTravelArea,operator:s.searchFilters.operator,buyOnDirectDebit:s.searchFilters.buyOnDirectDebit,buyOnDirectPurchase:s.searchFilters.buyOnDirectPurchase||null,buyOnSwift:s.searchFilters.buyOnSwift,hasOnlinePurchaseChannel:s.searchFilters.hasOnlinePurchaseChannel,purchaseTic:s.searchFilters.purchaseTic,purchaseRailStation:s.searchFilters.purchaseRailStation,purchasePayzone:s.searchFilters.purchasePayzone,railZoneFrom:s.searchFilters.railZoneFrom,railZoneTo:s.searchFilters.railZoneTo,timePeriod1:s.searchFilters.timePeriod1,timePeriod2:s.searchFilters.timePeriod2,timePeriod3:s.searchFilters.timePeriod3,timePeriod4:s.searchFilters.timePeriod4,limit:s.limit,limitExact:s.limitExact},u=l(r);s.postedJSON.allowBus&&(t="allowBus"),s.postedJSON.allowTrain&&(e="allowTrain"),s.postedJSON.allowMetro&&(a="allowMetro"),!s.postedJSON.allowBus||s.postedJSON.allowTrain||s.postedJSON.allowMetro||(o="/?"+t+"&"+u,n.set("url",o)),s.postedJSON.allowBus&&s.postedJSON.allowTrain&&!s.postedJSON.allowMetro&&(o="/?"+t+"&"+e+"&"+u,n.set("url",o)),s.postedJSON.allowBus&&!s.postedJSON.allowTrain&&s.postedJSON.allowMetro&&(o="/?"+t+"&"+a+"&"+u,n.set("url",o)),s.postedJSON.allowBus||!s.postedJSON.allowTrain||s.postedJSON.allowMetro||(o="/?"+e+"&"+u,n.set("url",o)),!s.postedJSON.allowBus&&s.postedJSON.allowTrain&&s.postedJSON.allowMetro&&(o="/?"+e+"&"+a+"&"+u,n.set("url",o)),s.postedJSON.allowBus||s.postedJSON.allowTrain||!s.postedJSON.allowMetro||(o="/?"+a+"&"+u,n.set("url",o)),s.postedJSON.allowBus&&s.postedJSON.allowTrain&&s.postedJSON.allowMetro&&(o="/?"+t+"&"+e+"&"+a+"&"+u,n.set("url",o)),s.postedJSON.allowBus||s.postedJSON.allowTrain||s.postedJSON.allowMetro||(o="/?"+u,n.set("url",o))}},0,!1)},0,!1)},s.update=function(){var t=s.all,e=s.exactMatch,o=s.otherResults;angular.forEach(s.searchFilters,function(t,e){(-1!==e.indexOf("allow")&&t||!1===t&&-1===e.indexOf("allow"))&&delete s.searchFilters[e]}),t=a("filter")(t,s.searchFilters),e=a("filter")(e,s.searchFilters),o=a("filter")(o,s.searchFilters),s.filteredTickets=a("orderBy")(t,s.orderBy),s.origTickets=a("orderBy")(e,s.orderBy),s.otherTickets=a("orderBy")(o,s.orderBy),s.updateGrid()},s.loadMore=function(){s.limit+=6,o.search("limit",s.limit),s.updateGrid()},s.loadMoreExact=function(){s.limitExact+=6,o.search("limitExact",s.limitExact),s.updateGrid()},s.filterButtons={operator:[],operatorLength:0,busTravelArea:[],railZoneFrom:[],railZoneTo:[]},s.toggleFilter=function(t){s.filterButtons[t]=!s.filterButtons[t]},s.swiftPAYG=N,s.ntrainOOC=function(){if(s.passValue=s.postJSON.brand,"ntrain - Out of County"===s.passValue)s.isHideCheck=!s.isHideCheck,t.stationFromReqOOC=!0,t.stationToReqOOC=!0,s.stationFromName=null,s.stationToName=null,s.stationViaOneName=null,t.stationFromName=null,t.stationToName=null;else if(t.stationFromReqOOC=!1,t.stationToReqOOC=!1,o.search().stationNames){var e=o.search().stationNames,a=e.toString(),n=a.split(",");t.stationFromName=n[0],t.stationToName=n[1],s.stationFromName=n[0],s.stationToName=n[1],s.stationViaOneName=n[2]}},s.toggleModalSwift=function(){s.modalShownSwift=!s.modalShownSwift},s.toggleModalFilter=function(){s.modalShownFilter=!s.modalShownFilter},u(),o.search().allowBus||o.search().allowMetro||o.search().allowTrain||o.search().brand&&o.search().passengerType&&o.search().timeBand||o.search().busTravelArea||o.search().operator||o.search().stationNames||o.search().brand){if(s.clearStation(),o.search().stationNames&&!0===s.postJSON.allowTrain||"nnetwork"===s.postJSON.brand||"ntrain"===s.postJSON.brand){var c=o.search().stationNames,m=c.toString(),f=m.split(",");t.stationFromName=f[0],t.stationToName=f[1],s.stationFromName=f[0],s.stationToName=f[1],s.stationViaOneName=f[2]}else t.stationFromName=null,t.stationToName=null,s.stationFromName=null,s.stationToName=null;s.getStations(),h(s.postJSON)}else o.url("").replace();t.showDetails=!1,"Swift PAYG"===o.search().brand&&(g(),N());function h(e){s.loadingStatus="loading",angular.copy(s.postJSON,s.postedJSON),o.search({allowBus:s.postedJSON.allowBus,allowTrain:s.postedJSON.allowTrain,allowMetro:s.postedJSON.allowMetro,passengerType:s.postedJSON.passengerType,timeBand:s.postedJSON.timeBand,brand:s.postedJSON.brand,stationNames:s.postedJSON.stationNames,buyOnDirectDebit:t.buyOnDirectDebitParameter,buyOnDirectPurchase:t.buyOnDirectPurchaseParameter,buyOnSwift:t.buyOnSwiftParameter,hasOnlinePurchaseChannel:t.hasOnlinePurchaseChannelParameter,purchaseTic:t.purchaseTicParameter,purchaseRailStation:t.purchaseRailStationParameter,purchasePayzone:t.purchasePayzoneParameter,busTravelArea:t.busTravelAreaParameter,operator:t.operatorParameter,railZoneFrom:t.railZoneFromParameter,railZoneTo:t.railZoneToParameter,timePeriod1:t.timePeriod1Parameter,timePeriod2:t.timePeriod2Parameter,timePeriod3:t.timePeriod3Parameter,timePeriod4:t.timePeriod4Parameter,limit:s.limit,limitExact:s.limitExact}),s.searchFilters={},s.origFilters={},r.ticketSearch(e).then(function(t){s.all=t,s.original=t,angular.forEach(s.all,function(t){-1===s.filterButtons.operator.indexOf(t.operator)&&s.filterButtons.operator.push(t.operator),-1===s.filterButtons.busTravelArea.indexOf(t.busTravelArea)&&s.filterButtons.busTravelArea.push(t.busTravelArea),-1===s.filterButtons.railZoneFrom.indexOf(t.railZoneFrom)&&s.filterButtons.railZoneFrom.push(t.railZoneFrom),-1===s.filterButtons.railZoneTo.indexOf(t.railZoneTo)&&s.filterButtons.railZoneTo.push(t.railZoneTo)});var e=s.postedJSON.allowBus||!1,o=s.postedJSON.allowTrain||!1,n=s.postedJSON.allowMetro||!1;s.postedJSON.allowTrain&&(null!=s.fromStationInfoZone?s.fromZoneNumber=s.fromStationInfoZone:null!=s.fromStationInfo?s.fromZoneNumber=s.fromStationInfo.zone:s.fromZoneNumber=null,null!=s.toStationInfoZone?s.toZoneNumber=s.toStationInfoZone:null!=s.toStationInfo?s.toZoneNumber=s.toStationInfo.zone:s.toZoneNumber=null,1==s.fromZoneNumber?s.ffromzone=1:2==s.fromZoneNumber?s.ffromzone=2:3==s.fromZoneNumber?s.ffromzone=3:4==s.fromZoneNumber?s.ffromzone=4:5==s.fromZoneNumber?s.ffromzone=5:s.ffromzone=null,1==s.toZoneNumber?s.ftozone=1:2==s.toZoneNumber?s.ftozone=2:3==s.toZoneNumber?s.ftozone=3:4==s.toZoneNumber?s.ftozone=4:5==s.toZoneNumber?s.ftozone=5:s.ftozone=null,1==s.ViaOneZoneNumber?s.fViaOnezone=1:2==s.ViaOneZoneNumber?s.fViaOnezone=2:3==s.ViaOneZoneNumber?s.fViaOnezone=3:4==s.ViaOneZoneNumber?s.fViaOnezone=4:5==s.ViaOneZoneNumber?s.fViaOnezone=5:s.fViaOnezone=null,null!=s.ViaOneZoneNumber&&(s.ViaOneZoneNumber<s.fromZoneNumber?(console.log("via greater then from"),s.ffromzone=s.ViaOneZoneNumber):s.ViaOneZoneNumber>s.toZoneNumber&&(console.log("via greater then to"),s.ftozone=s.ViaOneZoneNumber))),!0===s.postJSON.allowTrain||"nnetwork"===s.postJSON.brand||"ntrain"===s.postJSON.brand?(s.exactMatch=[],null!==s.fromZoneNumber&&null!==s.toZoneNumber?s.ffromzone<s.ftozone?s.exactMatch=a("filter")(t,{allowBus:e,allowTrain:o,allowMetro:n,railZoneFrom:s.ffromzone,railZoneTo:s.ftozone}):s.ffromzone>s.ftozone?s.exactMatch=a("filter")(t,{allowBus:e,allowTrain:o,allowMetro:n,railZoneFrom:s.ftozone,railZoneTo:s.ffromzone}):s.ffromzone===s.ftozone&&(s.exactMatch=a("filter")(t,{allowBus:e,allowTrain:o,allowMetro:n,railZoneFrom:1,railZoneTo:s.ftozone})):s.exactMatch=a("filter")(t,{allowBus:e,allowTrain:o,allowMetro:n})):(s.postedJSON.stationNames=null,s.exactMatch=a("filter")(t,{allowBus:e,allowTrain:o,allowMetro:n}));for(var r=s.all,i=s.exactMatch,l=0;l<i.length;l++)for(var u=r.length,c=0;c<u;c++)i[l]===r[c]&&(r=r.slice(0,c).concat(r.slice(c+1,u)));s.otherResults=r;var m=s.postedJSON.allowBus,f=s.postedJSON.allowTrain,h=s.postedJSON.allowMetro;(null!==m||null!==m&&null!==f||null!==m&&null!==h||null!==f&&null!==h)&&s.toggleFilter("mode"),null!==m&&null!==f&&null!==h&&s.toggleFilter("payment"),s.update(),s.loadingStatus="success"})}function d(){s.postJSON.allowBus=null,s.postJSON.allowTrain=null,s.postJSON.allowMetro=null}function p(){t.$broadcast("angucomplete-alt:clearInput","stationFrom"),t.stationFromName=null,s.postJSON.stationNames=[[]],t.stationFromReq=!1,t.stationFromNameOocZ5=null,s.fromStationInfoZone=null,t.fromStationText=null}function O(){t.$broadcast("angucomplete-alt:clearInput","stationTo"),t.stationToName=null,s.stationToName=null,s.postJSON.stationNames=[[]],t.stationToReq=!1,t.stationToNameOocZ5=null,s.toStationInfoZone=null,t.toStationText=null}t.fromEmpty="none",t.fromStationInputChanged=function(e){t.fromStationText=e},t.fromfocusState="None",t.fromFocusIn=function(){t.fromfocusState="In"},t.fromFocusOut=function(){t.fromfocusState="Out",null!=s.stationToName&&(t.stationFromReq=!0),null!=t.fromStationText&&null==s.stationFromName&&(t.stationFromReq=!0)},t.stationFromName=null,t.stationFromReq=!1,t.stationFromReqOOC=!0,t.stationFrom=function(e){e?(s.stationFromName=e.originalObject.name,s.postJSON.stationNames[0]=e.originalObject.name,t.stationFromTitle=e.originalObject.name,t.stationFromNameZone=e.originalObject.zone,t.stationFromNameOoc=e.originalObject.outOfCounty,t.stationFromNameOocZ5=e.originalObject.zone5InCounty,s.fromZoneNumber=e.originalObject.zone,s.fromStationInfoZone=e.originalObject.zone,t.stationFromReq=!1,t.fromEmpty=!0):(s.stationFromName=null,s.postJSON.stationNames[0]=null,t.stationFromTitle=null,t.stationFromReq=!1,t.fromEmpty=!1)},t.toEmpty="none",t.toStationInputChanged=function(e){t.toStationText=e},t.tofocusState="None",t.toFocusIn=function(){t.tofocusState="In",null!=s.stationFromName&&(t.stationToReq=!0)},t.toFocusOut=function(){t.tofocusState="Out",null!=s.stationFromName&&(t.stationToReq=!0),null!=t.toStationText&&null==s.stationToName&&(t.stationToReq=!0)},t.stationToName=null,t.stationToReq=!1,t.stationToReqOOC=!0,t.stationTo=function(e){e?(s.stationToName=e.originalObject.name,s.postJSON.stationNames[1]=e.originalObject.name,t.stationToTitle=e.originalObject.name,t.stationToNameZone=e.originalObject.zone,t.stationToNameOoc=e.originalObject.outOfCounty,t.stationToNameOocZ5=e.originalObject.zone5InCounty,s.toZoneNumber=e.originalObject.zone,s.toStationInfoZone=e.originalObject.zone,t.stationToReq=!1,t.toEmpty=!0):(t.stationToName=null,s.postJSON.stationNames[1]=null,t.stationToTitle=null,t.toEmpty=!1)},t.viaOneStationInputChanged=function(e){t.viaOneStationText=e},t.viaOnefocusState="None",t.stationViaOneFocusIn=function(){t.viaOnefocusState="In"},t.stationViaOneFocusOut=function(){t.viaOnefocusState="Out",null!=s.stationViaOneName&&(t.stationviaOneReq=!0),null==t.viaOneStationText&&null!=s.stationViaOneName||(t.stationViaOneReq=!0,t.stationToReq=!0,t.stationFromReq=!0)},t.stationViaOne=function(e){e&&(s.stationViaOneName=e.originalObject.name,s.postJSON.stationNames[2]=e.originalObject.name,t.stationViaOneTitle=e.originalObject.name,t.stationViaOneNameZone=e.originalObject.zone,t.stationViaOneNameOoc=e.originalObject.outOfCounty,t.stationViaOneNameOocZ5=e.originalObject.zone5InCounty,s.ViaOneZoneNumber=e.originalObject.zone,s.ViaOneStationInfoZone=e.originalObject.zone)},null!=s.stationViaOneName&&(t.stationVia=!0);function S(){t.$broadcast("angucomplete-alt:clearInput","stationViaOne"),t.stationViaOneName=null,t.viaOneStationText=null,s.stationViaOneName=null,s.postJSON.stationNames=[[]]}t.buyOnDirectDebitParameter&&(s.filterButtons.payment=!s.filterButtons.payment,s.searchFilters.buyOnDirectDebit=!0,t.buyOnDirectDebitCheck=function(){return!0});t.buyOnDirectPurchaseParameter&&(s.filterButtons.payment=!s.filterButtons.payment,s.searchFilters.buyOnDirectPurchase=!0,t.buyOnDirectPurchaseCheck=function(){return!0});t.buyOnSwiftParameter&&(s.filterButtons.payment=!s.filterButtons.payment,s.searchFilters.buyOnSwift=!0,t.buyOnSwiftCheck=function(){return!0});t.hasOnlinePurchaseChannelParameter&&(s.filterButtons.payment=!s.filterButtons.payment,s.searchFilters.hasOnlinePurchaseChannel=!0,t.hasOnlinePurchaseChannelCheck=function(){return!0});t.purchaseTicParameter&&(s.filterButtons.payment=!s.filterButtons.payment,s.searchFilters.purchaseTic=!0,t.purchaseTicCheck=function(){return!0});t.purchaseRailStationParameter&&(s.filterButtons.payment=!s.filterButtons.payment,s.searchFilters.purchaseRailStation=!0,t.purchaseRailStationCheck=function(){return!0});t.purchasePayzoneParameter&&(s.filterButtons.payment=!s.filterButtons.payment,s.searchFilters.purchasePayzone=!0,t.purchasePayzoneCheck=function(){return!0});t.busTravelAreaParameter&&(s.filterButtons.busTravelAreaBtn=!s.filterButtons.busTravelAreaBtn,s.searchFilters.busTravelArea=t.busTravelAreaParameter);t.operatorParameter&&(s.filterButtons.operatorBtn=!s.filterButtons.operatorBtn,s.searchFilters.operator=t.operatorParameter);t.railZoneFromParameter&&(s.filterButtons.railZoneBtn=!s.filterButtons.railZoneBtn,s.searchFilters.railZoneFrom=t.railZoneFromParameter);t.railZoneToParameter&&(s.filterButtons.railZoneBtn=!s.filterButtons.railZoneBtn,s.searchFilters.railZoneTo=t.railZoneToParameter);t.timePeriod1Parameter&&(s.filterButtons.time=!s.filterButtons.time,s.searchFilters.timePeriod1=!0,t.timePeriod1Check=function(){return!0});t.timePeriod2Parameter&&(s.filterButtons.time=!s.filterButtons.time,s.searchFilters.timePeriod2=!0,t.timePeriod2Check=function(){return!0});t.timePeriod3Parameter&&(s.filterButtons.time=!s.filterButtons.time,s.searchFilters.timePeriod3=!0,t.timePeriod3Check=function(){return!0});t.timePeriod4Parameter&&(s.filterButtons.time=!s.filterButtons.time,s.searchFilters.timePeriod4=!0,t.timePeriod4Check=function(){return!0});function N(){s.passValue=s.postJSON.brand,"Swift PAYG"===s.passValue?(s.isHideCheck=!s.isHideCheck,s.postJSON.passengerType=null,s.postJSON.timeBand=null,s.postJSON.stationNames=[]):"nbus"!==s.passValue&&"National Express"!==s.passValue&&"Diamond Bus"!==s.passValue&&"Stagecoach"!==s.passValue&&"Swift PAYG"!==s.passValue&&"West Midlands Metro"!==s.passValue||(s.postJSON.stationNames=[[]])}function g(){r.getSwiftSearch().then(function(t){s.swiftPaygTickets=t})}s.modalShownSwift=!1,s.hideModalFilter=function(){s.modalShownFilter=!s.modalShownFilter},s.modalShownFilter=!1,t.date=new Date}]).filter("removeHTMLTags",[function(){return function(t){return t?String(t).replace(/<[^>]+>/gm,""):""}}]).filter("escapeFilter",[function(){return function(t){return t?String(t).replace(/\n/gm,"<br><br>"):""}}]).filter("replace",[function(){return function(t,e,a){if(void 0!==t){var o=new RegExp(e,"g");return t.replace(o,a)}}}]).directive("initialSearch",[function(){return{templateUrl:assetPath+"partials/swift/search-results/initial-search.html",restrict:"E"}}]).directive("searchResults",[function(){return{templateUrl:assetPath+"partials/swift/search-results/search-results.html",restrict:"E"}}]).directive("filters",[function(){return{templateUrl:assetPath+"partials/swift/search-results/filters.html",restrict:"E"}}]).directive("filtersMobile",[function(){return{templateUrl:assetPath+"partials/swift/search-results/filters-mobile.html",restrict:"E"}}]).directive("item",["$timeout","angularGridInstance",function(t,e){return{templateUrl:assetPath+"partials/swift/search-results/item.html",restrict:"E",link:function(a,o,n){t(function(){a.$last&&e.ticketResults.refresh()},1e3)}}}]).controller("TicketDetailCtrl",["ticketingService","$interval","getURL","$routeParams","$scope","$timeout",function(t,e,a,o,n,r){var i=this;n.assetPath=assetPath,n.ticketUrl=ticketUrl,i.loadingText="Loading...",i.loadingStatus="loading",i.loadingArray=["Well, what are you waiting for?","Are we there yet?","Warming up the processors...","Reconfiguring the office coffee machine...","Doing something useful...","Are you ready?","So, do you come here often?","This may take some time...","I know this is painful to watch, but I have to load this.","Oh, no! Loading time...","Still Waiting... huh","Waiting for something in the server.","Creating randomly generated feature.","It's not you. It's me.","Eating your internet cookies...Yummy!"],i.loading=e(function(){i.loadingText=i.loadingArray[Math.round(Math.random()*(i.loadingArray.length-1))]},3500),i.ticketID=o.ticket,i.filterAccordions={},i.relatedTickets={},i.toggleClick=function(t){i.filterAccordions[t]=!i.filterAccordions[t]},i.modalShown=!1,i.toggleModal=function(){i.modalShown=!i.modalShown},i.toggleModalBus=function(){i.modalShownBus=!i.modalShownBus},i.toggleModalTrain=function(){i.modalShownTrain=!i.modalShownTrain},i.toggleModalSwift=function(){i.modalShownSwift=!i.modalShownSwift},i.operatorList=[],i.limit=4,i.openFilters=function(){document.getElementById("filterOverlay").style.display="block"},i.closeFilters=function(){document.getElementById("filterOverlay").style.display="none"},l=i.ticketID,t.getTicket(l).then(function(e){i.all=e,i.all.relatedTickets.length&&(i.related=[],angular.forEach(i.all.relatedTickets,function(e){t.getSimpleTicket(e.id).then(function(t){i.relatedTickets[e.id]=t,i.relatedList=i.relatedTickets[e.id],i.related.push(i.relatedList)})},i.related)),i.all.documents.length&&t.getTerms(l).then(function(t){i.relatedTerms=t}),t.getOperators().then(function(t){i.operatorList=t}),i.backToSearch=a,console.log(i.backToSearch),n.stationFromNameZone="1"}),i.modalShownBus=!1,i.modalShownTrain=!1,i.modalShown=!1,i.modalShownSwift=!1,r(function(){i.loadingStatus="success"},0);var l}]).directive("detailDetails",[function(){return{templateUrl:assetPath+"partials/swift/detail/details.html",restrict:"E"}}]).directive("detailSidebar",[function(){return{templateUrl:assetPath+"partials/swift/detail/sidebar.html",restrict:"E"}}]).directive("detailAlternative",[function(){return{templateUrl:assetPath+"partials/swift/detail/alternative.html",restrict:"E"}}]).directive("detailRelated",["$timeout","angularGridInstance",function(t,e){return{templateUrl:assetPath+"partials/swift/detail/related-product.html",restrict:"E",link:function(a,o,n){t(function(){a.$last&&e.alternativeResults.refresh()},0)}}}]).directive("detailWhere",[function(){return{templateUrl:assetPath+"partials/swift/detail/where-can-i-use.html",restrict:"E"}}]).directive("operators",[function(){return{templateUrl:assetPath+"partials/swift/detail/operator.html",restrict:"E"}}]).directive("modalDialog",[function(){return{restrict:"E",scope:{show:"="},replace:!0,transclude:!0,link:function(t,e,a){t.dialogStyle={},a.width&&(t.dialogStyle.width=a.width),a.height&&(t.dialogStyle.height=a.height),a.modalclass&&(t.dialogStyle.class=a.modalclass),t.hideModal=function(){t.show=!1}},template:'<div ng-show="show" class="mod"><div ng-show="show" class="modal" ng-click="hideModal()"></div><div class="overlay modal-content {{dialogStyle.class}}" ng-style="dialogStyle"><div class="ng-modal-close modal__close js-modal-close" ng-click="hideModal()">X</div><div class="ng-modal-dialog-content" ng-transclude></div></div></div>'}}]).directive("tabs",[function(){return{restrict:"E",transclude:!0,scope:{},controller:["$scope",function(t){var e=t.panes=[];t.select=function(t){angular.forEach(e,function(t){t.selected=!1}),t.selected=!0},this.addPane=function(a){0===e.length&&t.select(a),e.push(a)}}],template:'<div class="cfx"><div class="arrdep-filters__toggle"><div class="radio-bar"><span ng-repeat="pane in panes" ng-class="{active:pane.selected}"><input name="option" id="{{pane.title}}" type="radio"><label ng-click="select(pane)" for="{{pane.title}}" style="height: 44px;">{{pane.title}}</label></span></div></div><div class="tab-content" ng-transclude></div></div>',replace:!0}}]).directive("pane",[function(){return{require:"^tabs",restrict:"E",transclude:!0,scope:{title:"@"},link:function(t,e,a,o){o.addPane(t)},template:'<div class="tab-pane" ng-class="{active: selected}" ng-transclude></div>',replace:!0}}]).directive("tooltip",[function(){return{restrict:"A",controller:["$scope",function(t,e){t.isShown=!1,this.showHover=function(){t.isShown=!0!==t.isShown}}],transclude:!0,link:function(t,e,a,o){t.copy=a.tooltipc,e.bind("click",function(){t.$apply(function(){o.showHover()})})},template:'<div ng-transclude></div><p class="field-help tooltip" ng-show="isShown"><span class="close modal__close"></span><span data-ng-bind-html="copy"></span></p>'}}])}();