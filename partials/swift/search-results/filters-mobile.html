<div class="boxin ticket-filters">
    <!-- <a class="modal__close js-modal-close" data-ng-click="ticketing.closeFilters()" >Close</a>-->
    <div class="boxin">
        <h3>Filter your results</h3>
        <p><span class="type--blue">{{(ticketing.filteredTickets | filter: {displayInSwiftSearch: true}).length}}</span>
            tickets matching your criteria</p>
        <!-- Exclude Mode(s) -->
        <div class="filter-block" data-ng-hide="ticketing.postedJSON.brand == 'Diamond Bus' || ticketing.postedJSON.brand == 'Stagecoach' || ticketing.postedJSON.brand == 'Swift PAYG'"
            data-ng-if="!ticketing.postedJSON.allowBus || !ticketing.postedJSON.allowTrain || !ticketing.postedJSON.allowMetro">
            <div class="filter-title" data-ng-click="ticketing.toggleFilter('mode')">
                Exclude mode(s)
                <i class="material-icons">
                    {{ticketing.filterButtons.mode ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }}
                </i>
            </div>
            <ul class="checkbox-list nga-fast nga-collapse" data-ng-show="ticketing.filterButtons.mode">
                <li data-ng-if="!ticketing.postedJSON.allowBus">
                    <!-- (ticketing.filteredTickets | filter: {allowBus: true}).length == '0' -->
                    <input id="bus-only-radio" name="busOnly" type="checkbox" class="stylized" data-ng-model="ticketing.searchFilters.allowBus"
                        data-ng-change="ticketing.update();ticketing.updateFilters()" data-ng-true-value="false"
                        data-ng-false-value="true" />
                    <label for="bus-only-radio">Bus ({{ (ticketing.filteredTickets | filter: {allowBus:
                        true,displayInSwiftSearch: true}).length }})</label>
                </li>

                <li data-ng-if="!ticketing.postedJSON.allowTrain">
                    <input id="train-only-radio" name="trainOnly" type="checkbox" class="stylized" data-ng-model="ticketing.searchFilters.allowTrain"
                        data-ng-change="ticketing.update();ticketing.updateFilters()" data-ng-true-value="false"
                        data-ng-false-value="true" />
                    <label for="train-only-radio">Train ({{ (ticketing.filteredTickets | filter: {allowTrain:
                        true,displayInSwiftSearch: true}).length }})</label>
                </li>

                <li data-ng-if="!ticketing.postedJSON.allowMetro">
                    <input id="tram-only-radio" name="tramOnly" type="checkbox" class="stylized" data-ng-model="ticketing.searchFilters.allowMetro"
                        data-ng-change="ticketing.update();ticketing.updateFilters()" data-ng-true-value="false"
                        data-ng-false-value="true" />
                    <label for="tram-only-radio">Tram ({{ (ticketing.filteredTickets | filter: {allowMetro:
                        true,displayInSwiftSearch: true}).length }})</label>
                </li>
            </ul>
        </div>

        <!-- How to Buy -->
        <div class="filter-block">
            <div class="filter-title" data-ng-click="ticketing.toggleFilter('payment')">
                How to Buy
                <i class="material-icons">
                    {{ticketing.filterButtons.payment ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }}
                </i>
            </div>
            <ul class="checkbox-list nga-fast nga-collapse" data-ng-show="ticketing.filterButtons.payment">
                <li data-ng-hide="(ticketing.original | filter: {buyOnDirectDebit: true,displayInSwiftSearch: true}).length == '0'">
                    <input id="purchaseDebit" name="purchaseDebit" type="checkbox" class="stylized" data-ng-model="ticketing.searchFilters.buyOnDirectDebit"
                        data-ng-checked="buyOnDirectDebitCheck()" data-ng-change="ticketing.update()" ng-disabled="(ticketing.filteredTickets | filter: {buyOnDirectDebit: true}).length == '0'" />
                    <label for="purchaseDebit">Direct Debit ({{ (ticketing.filteredTickets | filter: {buyOnDirectDebit:
                        true}).length}})</label>
                </li>
                <li data-ng-hide="(ticketing.original | filter: {buyOnDirectPurchase: true,displayInSwiftSearch: true}).length == '0'">
                    <input id="purchaseDirect" name="purchaseDirect" type="checkbox" class="stylized" data-ng-model="ticketing.searchFilters.buyOnDirectPurchase"
                        data-ng-checked="buyOnDirectPurchaseCheck()" data-ng-change="ticketing.update()" ng-disabled="(ticketing.filteredTickets | filter: {buyOnDirectPurchase: true}).length == '0'" />
                    <label for="purchaseDirect">Quick buy ({{ (ticketing.filteredTickets | filter:
                        {buyOnDirectPurchase: true,displayInSwiftSearch: true}).length}})</label>
                </li>
                <li data-ng-hide="(ticketing.original | filter: {buyOnSwift: true,displayInSwiftSearch: true}).length == '0'">
                    <input id="purchaseSwift" name="purchaseSwift" type="checkbox" class="stylized" data-ng-model="ticketing.searchFilters.buyOnSwift"
                        data-ng-checked="buyOnSwiftCheck()" data-ng-change="ticketing.update()" ng-disabled="(ticketing.filteredTickets | filter: {buyOnSwift: true}).length == '0'" />
                    <label for="purchaseSwift">Swift ({{ (ticketing.filteredTickets | filter: {buyOnSwift:
                        true,displayInSwiftSearch: true}).length }})</label>
                </li>
                <li data-ng-hide="(ticketing.original | filter: {hasOnlinePurchaseChannel: true,displayInSwiftSearch: true}).length == '0'">
                    <input id="purchaseOnline" name="purchaseOnline" type="checkbox" class="stylized" data-ng-model="ticketing.searchFilters.hasOnlinePurchaseChannel"
                        data-ng-checked="hasOnlinePurchaseChannelCheck()" data-ng-change="ticketing.update()"
                        ng-disabled="(ticketing.filteredTickets | filter: {hasOnlinePurchaseChannel: true}).length == '0'" />
                    <label for="purchaseOnline">Buy Online ({{ (ticketing.filteredTickets | filter:
                        {hasOnlinePurchaseChannel: true,displayInSwiftSearch: true}).length }})</label>
                </li>
                <li data-ng-hide="(ticketing.original | filter: {purchaseTic: true,displayInSwiftSearch: true}).length == '0'">
                    <input id="purchaseTic" name="purchaseTic" type="checkbox" class="stylized" data-ng-model="ticketing.searchFilters.purchaseTic"
                        data-ng-checked="purchaseTicCheck()" data-ng-change="ticketing.update()" ng-disabled="(ticketing.filteredTickets | filter: {purchaseTic: true}).length == '0'" />
                    <label for="purchaseTic">Buy at Travel Shop ({{ (ticketing.filteredTickets | filter: {purchaseTic:
                        true,displayInSwiftSearch: true}).length}})</label>
                </li>
                <li data-ng-hide="(ticketing.original | filter: {purchaseRailStation: true,displayInSwiftSearch: true}).length == '0'">
                    <input id="purchaseRailStation" name="purchaseRailStation" type="checkbox" class="stylized"
                        data-ng-model="ticketing.searchFilters.purchaseRailStation" data-ng-checked="purchaseRailStationCheck()"
                        data-ng-change="ticketing.update()" ng-disabled="(ticketing.filteredTickets | filter: {purchaseRailStation: true}).length == '0'" />
                    <label for="purchaseRailStation">Buy at Rail Station ({{ (ticketing.filteredTickets | filter:
                        {purchaseRailStation: true,displayInSwiftSearch: true}).length}})</label>
                </li>
                <li data-ng-hide="(ticketing.original | filter: {purchasePayzone: true,displayInSwiftSearch: true}).length == '0'">
                    <input id="purchasePayzone" name="purchasePayzone" type="checkbox" class="stylized" data-ng-model="ticketing.searchFilters.purchasePayzone"
                        data-ng-checked="purchasePayzoneCheck()" data-ng-change="ticketing.update()" ng-disabled="(ticketing.filteredTickets | filter: {purchasePayzone: true}).length == '0'" />
                    <label for="purchasePayzone">Buy at Payzone Outlet ({{ (ticketing.filteredTickets | filter:
                        {purchasePayzone: true,displayInSwiftSearch: true}).length}})</label>
                </li>
            </ul>
        </div>

        <!-- Bus Travel Area -->
        <div class="filter-block" data-ng-if="ticketing.postedJSON.allowBus || ticketing.postedJSON.brand == 'National Express' || ticketing.postedJSON.brand == 'nbus' || ticketing.postedJSON.brand == 'Diamond Bus' || ticketing.postedJSON.brand == 'Stagecoach' && ticketing.filterButtons.busTravelArea.length">
            <div class="filter-title" data-ng-click="ticketing.toggleFilter('busTravelAreaBtn')">
                Bus Travel Area
                <i class="material-icons">
                    {{ticketing.filterButtons.busTravelAreaBtn ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }}
                </i>
            </div>
            <ul class="checkbox-list nga-fast nga-collapse" data-ng-show="ticketing.filterButtons.busTravelAreaBtn">
                <li>
                    <input id="busTravelArea{{$index}}" name="busTravelArea{{$index}}" type="radio" class="stylized"
                        data-ng-model="ticketing.searchFilters.busTravelArea" data-ng-checked="'{{busTravelAreaParameter}}' == '{{filter}}'"
                        data-ng-change="ticketing.update();" />
                    <label for="busTravelArea{{$index}}">
                        All Areas ({{ticketing.original.length}})
                    </label>
                </li>
                <li data-ng-repeat="filter in ticketing.filterButtons.busTravelArea | orderBy: filter | filter:''"
                    data-ng-if="filter != null" data-ng-hide="{{(ticketing.original | filter: {busTravelArea: filter,displayInSwiftSearch: true}).length}} == '0'">
                    <input id="busTravelArea{{$index}}" name="busTravelArea{{$index}}" type="radio" class="stylized"
                        data-ng-model="ticketing.searchFilters.busTravelArea" data-ng-checked="('{{busTravelAreaParameter}}' == '{{filter}}') ? true : false"
                        data-ng-change="ticketing.update();" value="{{filter}}" data-ng-true-value="true"
                        data-ng-false-value="false" />
                    <label for="busTravelArea{{$index}}">
                        <span data-ng-if="ticketing.postedJSON.brand == 'Diamond Bus'">{{filter |replace: 'Entire
                            Operator Area':'Diamond Bus Area'}} ({{ (ticketing.original | filter:
                            {busTravelArea:filter,displayInSwiftSearch: true}).length }})</span>
                        <span data-ng-if="ticketing.postedJSON.brand == 'Stagecoach'">{{filter |replace: 'Entire
                            Operator Area':'Stagecoach Bus Area'}} ({{ (ticketing.original | filter:
                            {busTravelArea:filter,displayInSwiftSearch: true}).length }})</span>
                        <span data-ng-hide="ticketing.postedJSON.brand == 'Diamond Bus' || ticketing.postedJSON.brand == 'Stagecoach'">{{filter
                            |replace: 'Entire Operator Area':'Diamond Bus Area'}} ({{ (ticketing.original | filter:
                            {busTravelArea:filter,displayInSwiftSearch: true}).length }})</span>
                    </label>
                </li>
            </ul>
        </div>

        <!-- Bus Operator -->
        <div class="filter-block" data-ng-hide="ticketing.postedJSON.allowBus && ticketing.postedJSON.allowMetro && ticketing.postedJSON.allowTrain || ticketing.postedJSON.brand == 'nnetwork'"
            data-ng-if="ticketing.postedJSON.allowBus && ticketing.filterButtons.operator.length">
            <div class="filter-title" data-ng-click="ticketing.toggleFilter('operatorBtn')">
                Bus Operator
                <i class="material-icons">
                    {{ticketing.filterButtons.operatorBtn ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }}
                </i>
            </div>
            <ul class="checkbox-list nga-fast nga-collapse" data-ng-show="ticketing.filterButtons.operatorBtn">
                <li>
                    <input id="operator00" type="radio" class="stylized" data-ng-model="ticketing.searchFilters.operator"
                        data-ng-change="ticketing.update();" />
                    <label for="operator00">All Operators ({{ticketing.original.length}})
                    </label>
                </li>
                <li data-ng-repeat="filter in ticketing.filterButtons.operator | orderBy: filter | filter:''"
                    data-ng-if="filter != null" data-ng-hide="{{(ticketing.original | filter: {operator: filter,displayInSwiftSearch: true}).length}} == '0'">
                    <input id="operator{{$index}}" type="radio" class="stylized" data-ng-model="ticketing.searchFilters.operator"
                        data-ng-change="ticketing.update();" value="{{filter}}" />
                    <label for="operator{{$index}}">{{filter |replace: 'Network West Midlands':'Multi Operator'}} ({{
                        (ticketing.original | filter: {operator: filter,displayInSwiftSearch: true}).length}})
                    </label>
                </li>
            </ul>
        </div>

        <!-- Train Zones-->
        <div class="filter-block" data-ng-if="ticketing.postedJSON.allowTrain || ticketing.postedJSON.brand == 'ntrain' || ticketing.postedJSON.brand == 'nnetwork'">
            <div class="filter-title" data-ng-click="ticketing.toggleFilter('railZoneBtn')">
                Train/rail zones
                <i class="material-icons">
                    {{ticketing.filterButtons.railZoneBtn ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }}
                </i>
            </div>
            <div class="nga-fast nga-collapse" data-ng-show="ticketing.filterButtons.railZoneBtn">
                <div class="fields new-transport-icons-blue nga-fast nga-fade" data-ng-if="ticketing.postJSON.allowBus || ticketing.postJSON.allowTrain || ticketing.postJSON.allowMetro || ticketing.postedJSON.brand == 'ntrain' || ticketing.postedJSON.brand == 'nnetwork'">
                    <label class="plain" for="PassengerType">From:</label>
                    <span class="stylized-select">
                        <select id="railZoneFromMobile" name="railZoneFrom" aria-disabled="false" data-ng-model='ticketing.searchFilters.railZoneFrom'
                            data-ng-change="ticketing.update()">
                            <option value="">Any Zones</option>
                            <option data-ng-repeat="option in ticketing.filterButtons.railZoneFrom | filter:''" value="{{option}}">Zone
                                {{option}}</option>
                        </select>
                    </span>
                    <br /><br />
                    <label class="plain" for="PassengerType">To:</label>
                    <span class="stylized-select">
                        <select id="railZoneToMobile" name="railZoneTo" aria-disabled="false" data-ng-model='ticketing.searchFilters.railZoneTo'
                            data-ng-change="ticketing.update()">
                            <option value="">Any Zones</option>
                            <option data-ng-repeat="option in ticketing.filterButtons.railZoneTo | orderBy:'+option' | filter:''"
                                value="{{option}}">Zone {{option}}</option>
                        </select>
                    </span>
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-purple submitSpinner nga-fast nga-fade boxin" ng-click='ticketing.hideModalFilter();'>Done</button>
    </div>
</div>