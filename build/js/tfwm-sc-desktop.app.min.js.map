{"version":3,"sources":["app.js","ticket.templates.js","tickets.templates.js"],"names":["trustedURLs","$sceDelegateProvider","resourceUrlWhitelist","routeProvider","$routeProvider","when","title","controller","templateUrl","controllerAs","reloadOnSearch","resolve","getUnique","savedFilter","get","getURL","otherwise","redirectTo","analytics","$rootScope","$location","$window","dataLayer","$on","push","event","attributes","route","absUrl","split","angular","module","config","run","constant","baseURL","apiServiceBaseUri","local","buildNo","$inject","detailRelated","$timeout","angularGridInstance","restrict","link","scope","$$postDigest","element","document","ready","alternativeResults","refresh","directive","searchResults","filters","filtersMobile","ticketItem","ticketResults","origTicketResults"],"mappings":"CAEA,WACA,aAwBA,SAAAA,EAAAC,GACAA,EAAAC,qBAAA,CAEA,OACA,0BAEA,wCACA,uCACA,wBAEA,CAEA,SAAAC,EAAAC,GAEAA,EACAC,KAAA,IAAA,CACAC,MAAA,UACAC,WAAA,sBACAC,YAAA,gCACAC,aAAA,UACAC,gBAAA,IAGAL,KAAA,kBAAA,CACAC,MAAA,SACAC,WAAA,mBACAE,aAAA,SACAD,YAAA,iCACAG,QAAA,CAEAC,UAAA,CACA,cACA,SAAAC,GAEA,OAAAA,EAAAC,IAAA,YACA,GAEAC,OAAA,CACA,cACA,SAAAF,GAEA,OAAAA,EAAAC,IAAA,MACA,IAGAJ,gBAAA,IAEAM,UAAA,CACAV,MAAA,UACAW,WAAA,KAEA,CAIA,SAAAC,EAAAC,EAAAC,EAAAC,GACA,MAAAC,EAAAD,EAAAC,WAAA,GAEAH,EAAAI,IAAA,uBAAA,WACAD,EAAAE,KAAA,CACAC,MAAA,gBACAC,WAAA,CACAC,MAAAP,EAAAQ,SAAAC,MAAA,2BAAA,KAGA,GACA,CAxFAC,QACAC,OAAA,eAAA,CACA,aACA,UACA,mBACA,cACA,sBAEAC,OAAAhC,GACAgC,OAAA7B,GACA8B,IAAAf,GACAgB,SAAA,iBAAA,CAEAC,QAAA,qBACAC,kBAAA,QAGAC,OAAA,EAEAC,QAAA,yBAEAtC,EAAAuC,QAAA,CAAA,wBAYApC,EAAAoC,QAAA,CAAA,iBAAA,kBA2CArB,EAAAqB,QAAA,CAAA,aAAA,YAAA,UAaA,CA5FA,GCFA,WACA,aAmCA,SAAAC,EAAAC,EAAAC,GACA,MAAA,CACAlC,YAAA,2CACAmC,SAAA,IAEAC,KAAA,SAAAC,GACAA,EAAAC,cAAA,WACAhB,QAAAiB,QAAAC,UAAAC,OAAA,WACAR,GAAA,WACAC,EAAAQ,mBAAAC,SACA,GAAA,EACA,GACA,GACA,EAEA,CAhDArB,QACAC,OAAA,gBACAqB,UAAA,iBASA,WACA,MAAA,CACA5C,YAAA,mCACAmC,SAAA,IAEA,IAbAS,UAAA,iBAeA,WACA,MAAA,CACA5C,YAAA,mCACAmC,SAAA,IAEA,IAnBAS,UAAA,qBAqBA,WACA,MAAA,CACA5C,YAAA,uCACAmC,SAAA,IAEA,IAzBAS,UAAA,gBAAAZ,GACAY,UAAA,eA4CA,WACA,MAAA,CACA5C,YAAA,2CACAmC,SAAA,IAEA,IAhDAS,UAAA,aAkDA,WACA,MAAA,CACA5C,YAAA,oCACAmC,SAAA,IAEA,IA9BAH,EAAAD,QAAA,CAAA,WAAA,sBA+BA,CAlEA,GCAA,WACA,aAWA,SAAAc,IACA,MAAA,CACA7C,YAAA,2CACAmC,SAAA,IAEA,CAGA,SAAAW,IACA,MAAA,CACA9C,YAAA,oCACAmC,SAAA,IAEA,CAGA,SAAAY,IACA,MAAA,CACA/C,YAAA,2CACAmC,SAAA,IAEA,CAGA,SAAAa,EAAAf,EAAAC,GACA,MAAA,CACAC,SAAA,IAEAC,KAAA,SAAAC,GAEAA,EAAAC,cAAA,WAEAhB,QAAAiB,QAAAC,UAAAC,OAAA,WAIAR,GAAA,WAMAC,EAAAe,cAAAN,UACAT,EAAAgB,kBAAAP,SACA,GAAA,EACA,GACA,GACA,EAEA,CA1DArB,QACAC,OAAA,gBACAqB,UAAA,gBAAAC,GACAD,UAAA,UAAAE,GACAF,UAAA,gBAAAG,GACAH,UAAA,aAAAI,GAGAH,EAAAd,QAAA,GAQAe,EAAAf,QAAA,GAQAgB,EAAAhB,QAAA,GAQAiB,EAAAjB,QAAA,CAAA,WAAA,sBA2BA,CA9DA","file":"tfwm-sc-desktop.app.min.js","sourcesContent":["/* eslint-disable angular/window-service */\n/* eslint-disable angular/di */\n(function() {\n  'use strict';\n\n  angular\n    .module('ticketingApp', [\n      'ngSanitize',\n      'ngRoute',\n      'angucomplete-alt',\n      'angularGrid',\n      'ng.deviceDetector'\n    ])\n    .config(trustedURLs)\n    .config(routeProvider)\n    .run(analytics)\n    .constant('ngAuthSettings', {\n      // this is used for what build you require before uploading to the relevant dir on CDN, just un-comment the one you require below\n      baseURL: 'https://wmcadigital.github.io/tfwm-ticketing-legacy/ScDesktop',\n      apiServiceBaseUri: 'https://ticketingv2mzr3ie67n5b62.azurewebsites.net/',\n\n      // LOCAL\n      local: true, // Changes logic in services.js based on if this is available\n\n      buildNo: 'NWM Ticketing v2.0.0'\n    });\n  trustedURLs.$inject = ['$sceDelegateProvider'];\n  function trustedURLs($sceDelegateProvider) {\n    $sceDelegateProvider.resourceUrlWhitelist([\n      // Allow same origin resource loads.\n      'self',\n      'http://censlwebdev01/**',\n      // Allow loading from our assets domain.  Notice the difference between * and **.\n      'https:https://cloudcdn.wmca.org.uk/**',\n      'http:https://cloudcdn.wmca.org.uk/**',\n      'https://wmcadigital.github.io/tfwm-ticketing-legacy/ScDesktop**'\n    ]);\n  }\n  routeProvider.$inject = ['$routeProvider', 'ngAuthSettings'];\n  function routeProvider($routeProvider) {\n    // console.log(ngAuthSettings.buildNo + ngAuthSettings.apiServiceBaseUri); // Log the build to the console\n    $routeProvider\n      .when('/', {\n        title: 'tickets',\n        controller: 'TicketingSearchCtrl',\n        templateUrl: 'tickets/views/tfwm/index.html',\n        controllerAs: 'tickets',\n        reloadOnSearch: false\n      })\n\n      .when('/ticket/:ticket', {\n        title: 'ticket',\n        controller: 'TicketDetailCtrl',\n        controllerAs: 'ticket',\n        templateUrl: 'ticket/views/shared/index.html',\n        resolve: {\n          // Before page loads..\n          getUnique: [\n            'savedFilter',\n            function(savedFilter) {\n              // Get the search page history url from cache\n              return savedFilter.get('stateless');\n            }\n          ],\n          getURL: [\n            'savedFilter',\n            function(savedFilter) {\n              // get saved url from cache\n              return savedFilter.get('url');\n            }\n          ]\n        },\n        reloadOnSearch: false\n      })\n      .otherwise({\n        title: 'tickets',\n        redirectTo: '/'\n      });\n  }\n\n  // Safely instantiate dataLayer  - This is so Google Analytics tracks properly via Tag Manager\n  analytics.$inject = ['$rootScope', '$location', '$window'];\n  function analytics($rootScope, $location, $window) {\n    const dataLayer = $window.dataLayer || [];\n\n    $rootScope.$on('$routeChangeSuccess', function() {\n      dataLayer.push({\n        event: 'ngRouteChange',\n        attributes: {\n          route: $location.absUrl().split('https://www.tfwm.org.uk')[1]\n        }\n      });\n    });\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('ticketingApp')\n    .directive('detailDetails', detailDetails)\n    .directive('detailSidebar', detailSidebar)\n    .directive('detailAlternative', detailAlternative)\n    .directive('detailRelated', detailRelated)\n    .directive('detailWhere', detailWhere)\n    .directive('operators', operators);\n\n  // DIRECTIVES\n\n  function detailDetails() {\n    return {\n      templateUrl: 'ticket/views/shared/details.html',\n      restrict: 'E'\n    };\n  }\n\n  function detailSidebar() {\n    return {\n      templateUrl: 'ticket/views/shared/sidebar.html',\n      restrict: 'E'\n    };\n  }\n\n  function detailAlternative() {\n    return {\n      templateUrl: 'ticket/views/shared/alternative.html',\n      restrict: 'E'\n    };\n  }\n\n  detailRelated.$inject = ['$timeout', 'angularGridInstance'];\n  function detailRelated($timeout, angularGridInstance) {\n    return {\n      templateUrl: 'ticket/views/shared/related-product.html',\n      restrict: 'E',\n      // this fixes a bug where the cards weren't loading on initial load in slow loading browsers\n      link: function(scope) {\n        scope.$$postDigest(function() {\n          angular.element(document).ready(function() {\n            $timeout(function() {\n              angularGridInstance.alternativeResults.refresh();\n            }, 0);\n          });\n        });\n      }\n    };\n  }\n\n  function detailWhere() {\n    return {\n      templateUrl: 'ticket/views/shared/where-can-i-use.html',\n      restrict: 'E'\n    };\n  }\n\n  function operators() {\n    return {\n      templateUrl: 'ticket/views/shared/operator.html',\n      restrict: 'E'\n    };\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('ticketingApp')\n    .directive('searchResults', searchResults)\n    .directive('filters', filters)\n    .directive('filtersMobile', filtersMobile)\n    .directive('ticketItem', ticketItem);\n\n  // DIRECTIVES\n  searchResults.$inject = [];\n  function searchResults() {\n    return {\n      templateUrl: 'tickets/views/shared/search-results.html',\n      restrict: 'E'\n    };\n  }\n\n  filters.$inject = [];\n  function filters() {\n    return {\n      templateUrl: 'tickets/views/shared/filters.html',\n      restrict: 'E'\n    };\n  }\n\n  filtersMobile.$inject = [];\n  function filtersMobile() {\n    return {\n      templateUrl: 'tickets/views/shared/filters-mobile.html',\n      restrict: 'E'\n    };\n  }\n\n  ticketItem.$inject = ['$timeout', 'angularGridInstance'];\n  function ticketItem($timeout, angularGridInstance) {\n    return {\n      restrict: 'A',\n      // This fixes a bug where the cards weren't loading on initial load in slow loading browsers\n      link: function(scope) {\n        // start by waiting for digests to finish\n        scope.$$postDigest(function() {\n          // next we wait for the dom to be ready\n          angular.element(document).ready(function() {\n            // finally we apply a timeout with a value\n            // of 0 ms to allow any lingering js threads\n            // to catch up\n            $timeout(function() {\n              // your dom is ready and rendered\n              // if you have an ng-show wrapper\n              // hiding your view from the ugly\n              // render cycle, we can go ahead\n              // and unveil that now:\n              angularGridInstance.ticketResults.refresh();\n              angularGridInstance.origTicketResults.refresh();\n            }, 0);\n          });\n        });\n      }\n    };\n  }\n})();\n"]}