{"version":3,"sources":["ticket.price.directive.js","tickets.gpay-button.directive.js","tickets.gpay.directive.js","tickets.initial-search.directive.js","tickets.item.directive.js","tickets.mobility.credits.directive.js","tickets.price.directive.js","tickets.refresher.js"],"names":["angular","module","directive","restrict","templateUrl","GpayController","$http","vm","this","elementIds","buyButton","get","value","then","response","buyTicketUrl","data","forEach","priceLevels","price","push","type","unique","filter","elem","index","self","indexOf","includes","gpay","scope","controller","controllerAs","bindToController","$inject","gpayController","whereToBuy","matrixID","matrixId","itemController","window","setTicketFinder","name","finderLink","mobilityCreditsController","features","mobC","refresherController","$scope","$transclude","$attrs","$element","childScope","$watch","condition","empty","$destroy","clone","newScope","append","transclude"],"mappings":"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","file":"directives.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular.module('ticketingApp').directive('ticketPrice', ticketPrice);\n\n  // function to display price in product sidebar and mobile details\n  function ticketPrice() {\n    const directive = {\n      restrict: 'E',\n      templateUrl: 'ticket/views/shared/price.html'\n    };\n\n    return directive;\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular.module('ticketingApp').directive('paygButton', paygButton);\n\n  // function to retrieve pricelevels and return if product is available on Google Pay\n  function paygButton() {\n    var directive = {\n      restrict: 'EA',\n      templateUrl: 'tickets/views/shared/product-payg-button.html',\n      scope: {\n        value: '='\n      },\n      controller: GpayController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n  }\n\n  GpayController.$inject = ['$http'];\n  function GpayController($http) {\n    var vm = this;\n    vm.elementIds = [];\n    vm.buyButton = 'Buy now'; // default button text\n\n    // get ticket data form simple api\n    $http.get('https://ticketingv2mzr3ie67n5b62.azurewebsites.net/tickets/' + vm.value + '/simple').then(function(response) {\n      vm.buyTicketUrl = response.data.buyTicketUrl;\n    });\n\n    // get ticket data form complete api - work out if product is gpay\n    $http.get('https://ticketingv2mzr3ie67n5b62.azurewebsites.net/tickets/' + vm.value + '/complete').then(function(response) {\n      // console.log(response);\n\n      // work out payg and gpay\n      // get each priceLevel\n      angular.forEach(response.data.priceLevels, function(price) {\n        vm.elementIds.push(price.type);\n      });\n\n      // remove duplicates from priceLevel\n      vm.unique = vm.elementIds.filter(function(elem, index, self) {\n        return index === self.indexOf(elem);\n      });\n\n      // if priceLevel includes Google Pay\n      if (vm.unique.includes('Google Pay')) {\n        vm.gpay = true;\n        vm.buyButton = 'Buy on Google Pay';\n      } else {\n        vm.gpay = false;\n      }\n    });\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular.module('ticketingApp').directive('gPay', gPay);\n\n  // function to retrieve pricelevels and return if product is available on Google Pay\n  function gPay() {\n    const directive = {\n      restrict: 'EA',\n      templateUrl: 'tickets/views/shared/gpay.html',\n      scope: {\n        value: '='\n      },\n      controller: gpayController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n  }\n\n  gpayController.$inject = ['$http'];\n  function gpayController($http) {\n    const vm = this;\n    vm.elementIds = [];\n    vm.whereToBuy = [];\n\n    // get ticket data form complete api\n    $http.get('https://ticketingv2mzr3ie67n5b62.azurewebsites.net/tickets/' + vm.value + '/complete').then(function(response) {\n      vm.matrixID = response.data.matrixId;\n    });\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular.module('ticketingApp').directive('search', search);\n\n  // function to display price in product item\n  function search() {\n    const directive = {\n      restrict: 'E',\n      templateUrl: 'tickets/views/shared/initial-search.html'\n    };\n\n    return directive;\n  }\n})();\n","/* eslint-disable angular/window-service */\n(function() {\n  'use strict';\n\n  angular.module('ticketingApp').directive('item', item);\n\n  // function to display item\n  function item() {\n    const directive = {\n      restrict: 'E',\n      templateUrl: 'tickets/views/shared/item.html',\n      controller: itemController,\n      controllerAs: 'vm', // Add controllerAs for view binding\n      bindToController: true // Recommended for isolated scope\n    };\n\n    return directive;\n  }\n\n  function itemController() {\n    const vm = this;\n    vm.elementIds = [];\n    vm.whereToBuy = [];\n\n    if (window?.setTicketFinder?.name.includes('TfWM Ticket Finder')) {\n      vm.finderLink = 'tfwm/';\n    } else if (window?.setTicketFinder?.name.includes('Swift Ticket Finder')) {\n      vm.finderLink = 'swift/';\n    } else if (window?.setTicketFinder?.name.includes('Oneapp Ticket Finder')) {\n      vm.finderLink = 'oneapp/';\n    } else if (window?.setTicketFinder?.name.includes('Smart Citizen Desktop Production')) {\n      vm.finderLink = 'tfwm-sc-desktop/';\n    } else if (window?.setTicketFinder?.name.includes('Smart Citizen Desktop Test')) {\n      vm.finderLink = 'tfwm-sc-desktop-test/';\n    } else if (window?.setTicketFinder?.name.includes('Smart Citizen Production')) {\n      vm.finderLink = 'tfwm-sc/';\n    } else if (window?.setTicketFinder?.name.includes('Smart Citizen Dev')) {\n      vm.finderLink = 'tfwm-sc-dev/';\n    } else if (window?.setTicketFinder?.name.includes('Smart Citizen Test')) {\n      vm.finderLink = 'tfwm-sc-test/';\n    } else if (window?.setTicketFinder?.name.includes('Smart Citizen Mobile Production')) {\n      vm.finderLink = 'tfwm-sc-mobile/';\n    } else if (window?.setTicketFinder?.name.includes('Smart Citizen Mobile Test')) {\n      vm.finderLink = 'tfwm-sc-mobile-test/';\n    } else {\n      vm.finderLink = '';\n    }\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular.module('ticketingApp').directive('mobilityCredits', mobilityCredits);\n\n  // function to retrieve pricelevels and return if product is available on Google Pay\n  function mobilityCredits() {\n    const directive = {\n      restrict: 'EA',\n      templateUrl: 'tickets/views/shared/mobility-credits.html',\n      scope: {\n        value: '='\n      },\n      controller: mobilityCreditsController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n  }\n\n  mobilityCreditsController.$inject = ['$http'];\n  function mobilityCreditsController($http) {\n    const vm = this;\n    vm.elementIds = [];\n    vm.whereToBuy = [];\n\n    // get ticket data form complete api\n    $http.get('https://ticketingv2mzr3ie67n5b62.azurewebsites.net/tickets/' + vm.value + '/complete').then(function(response) {\n      // work out if product has mobility credits in it's features\n      angular.forEach(response.data.features, function(price) {\n        vm.elementIds.push(price.name);\n      });\n\n      // remove duplicates from features\n      vm.unique = vm.elementIds.filter(function(elem, index, self) {\n        return index === self.indexOf(elem);\n      });\n\n      // if features include Mobility Credits\n      if (vm.unique.includes('Mobility Credits')) {\n        vm.mobC = true;\n      } else {\n        vm.mobC = false;\n      }\n    });\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular.module('ticketingApp').directive('price', price);\n\n  // function to display price in product item\n  function price() {\n    const directive = {\n      restrict: 'E',\n      templateUrl: 'tickets/views/shared/price.html'\n    };\n\n    return directive;\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular.module('ticketingApp').directive('refresher', refresher);\n\n  // function to display refresh the grid\n  function refresher() {\n    const directive = {\n      transclude: true,\n      controller: refresherController\n    };\n\n    return directive;\n  }\n\n  refresherController.$inject = ['$scope', '$transclude', '$attrs', '$element'];\n  function refresherController($scope, $transclude, $attrs, $element) {\n    let childScope;\n\n    $scope.$watch($attrs.condition, function() {\n      $element.empty();\n      if (childScope) {\n        childScope.$destroy();\n        childScope = null;\n      }\n\n      $transclude(function(clone, newScope) {\n        childScope = newScope;\n        $element.append(clone);\n      });\n    });\n  }\n})();\n"]}